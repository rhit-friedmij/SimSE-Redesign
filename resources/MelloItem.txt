package simse.gui;

import java.util.Vector;

import javafx.scene.image.ImageView;
import javafx.scene.layout.HBox;
import javafx.scene.layout.Pane;
import javafx.scene.paint.Color;
import javafx.scene.text.Text;
import simse.gui.util.JavaFXHelpers;

public class MelloItem extends Pane implements Cloneable{
	
	String task;
	Vector<Object> employees;
	
	public MelloItem(String item, Vector<Object> workers) {
		this.task = item;
		this.employees = workers;
		HBox box = new HBox();
		
		HBox textBox = new HBox();
		textBox.setBackground(JavaFXHelpers.createBackgroundColor(Color.rgb(128, 128, 128)));
		textBox.getChildren().add(new Text(task));
		
		box.getChildren().add(textBox);
		
		for (Object worker : workers) {
			String imgName = TabPanel.getImage(worker);
			ImageView img = JavaFXHelpers.createImageView(imgName);
			box.getChildren().add(img);
		}
		
		this.getChildren().add(box);
	}
	
	@Override
	public Object clone() {
		return new MelloItem(this.task, (Vector<Object>)this.employees.clone());
	}
	
	public MelloItem(String item) {
		this.task = item;
		this.employees = new Vector<Object>();
		HBox box = new HBox();
		
		HBox textBox = new HBox();
		textBox.setBackground(JavaFXHelpers.createBackgroundColor(Color.rgb(128, 128, 128)));
		textBox.getChildren().add(new Text(task));
		
		box.getChildren().add(textBox);
		
		this.getChildren().add(box);
	}
	
	public MelloItem addEmp(Object emp) {
		employees.add(emp);
		return new MelloItem(task, employees);
	}
	
	public MelloItem removeEmp(Object emp) {
		employees.remove(emp);
		if (employees.isEmpty()) return null;
		return new MelloItem(task, employees);
	}
	

	public boolean isTask(String task) {
		return this.task.equals(task);
	}

}
